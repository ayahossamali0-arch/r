<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ - Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø°ÙƒÙŠ ğŸ¤–</title>
<style>
:root{
  --accent1: #0f0684;
  --accent2: #7b0f72;
  --accent3: #ff66cc;
  --white: #ffffff;
  --bg: #fff;
  --fg: #222;
  --panel-bg: #fff;
  --border-padding: 6px; /* Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ */
}

*{box-sizing:border-box}
html,body{height:100%;margin:0;padding:0;font-family:"Cairo",sans-serif;direction:rtl}
body { background: var(--bg); color:var(--fg); display:flex; align-items:center; justify-content:center; height:100vh; transition: background .25s,color .25s; }

/* Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ù…Ø© */
.container {
  width:100%;
  max-width:1100px;
  padding:20px;
  height: calc(100vh - 40px);
  display:flex;
  align-items:center;
  justify-content:center;
}

/* Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ Ø§Ù„Ù…ØªØ­Ø±Ùƒ (Ø§Ù„Ø­Ø¯ Ø¨ØªØ¯Ø±Ø¬ Ù…ØªØ­Ø±Ùƒ) */
.fancy-frame {
  width: 100%;
  max-width: 920px;
  height: 100%;
  border-radius: 16px;
  padding: var(--border-padding);
  position: relative;
  /* Ø®Ù„ÙÙŠØ© Ø§Ù„ØªØ¯Ø±Ø¬ Ø§Ù„Ù…ØªØ­Ø±Ùƒ */
  background: linear-gradient(90deg, var(--accent1), var(--accent2), var(--accent3), var(--white), var(--accent1));
  background-size: 300% 300%;
  animation: gradientMove 8s linear infinite;
  display:flex;
  align-items:stretch;
  justify-content:center;
  box-shadow: 0 14px 40px rgba(0,0,0,0.12);
  --border-padding: 3px; 

}

/* ØªØ­Ø±ÙŠÙƒ Ø§Ù„ØªØ¯Ø±Ø¬ */
@keyframes gradientMove{
  0%{ background-position:0% 50%;}
  50%{ background-position:100% 50%;}
  100%{ background-position:0% 50%;}
}

/* Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© (Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ©) */
.chat-box {
  width:100%;
  height:100%;
  border-radius: 12px;
  overflow: hidden;
  background: var(--panel-bg);
  display:flex;
  flex-direction:column;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02);
}

/* Ø¥Ø²Ø§Ø­Ø© Ø¨Ø³ÙŠØ·Ø© Ù„ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ù…ØªØ­Ø±Ùƒ ÙƒØ­Ø§ÙØ© Ø®Ø§Ø±Ø¬ÙŠØ© */
.chat-inner {
  height:100%;
  display:flex;
  flex-direction:column;
}

/* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ */
.messages {
  flex:1;
  overflow-y:auto;
  padding:10px 5PX;
  display:flex;
  flex-direction:column;
  gap:10px;
  background: linear-gradient(180deg, rgba(0,0,0,0.01), transparent);
}

/* Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø«Ø§Ø¨Øª Ø£Ø³ÙÙ„ (Ø¹Ù†Ø¯ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ø­Ø§ÙˆÙŠØ©) */
.input-area {
  display:flex;
  gap:10px;
  align-items:center;
  padding:12px;
  border-top:1px solid rgba(183, 146, 181, 0.454);
  background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.9));
}

/* ÙÙ‚Ø§Ø¹Ø§Øª Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ â€” ØªØ±ØªÙŠØ¨ ÙˆØ§Ø¶Ø­: Ø¨ÙˆØª Ø¹Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø±ØŒ Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ† */
.message { display:flex; align-items:flex-end; gap:10px; max-width:100%; }
.message img { width:40px; height:40px; border-radius:8px; object-fit:cover; flex-shrink:0; }

/* Ø¨ÙˆØª (ÙŠØ³Ø§Ø±) */
.message.bot {
  flex-direction: row;
  justify-content: flex-start;
  align-self: flex-start;  /* ÙŠØ¬Ø¹Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ ØªÙ„ØªØµÙ‚ Ø¨Ø§Ù„ÙŠØ³Ø§Ø± */
}
.message.bot .bubble { background:#e6f5ff; color:#003366; border:1px solid rgba(0,170,255,0.15); }

/* Ù…Ø³ØªØ®Ø¯Ù… (ÙŠÙ…ÙŠÙ†) */
.message.user {
  flex-direction: row-reverse;
  justify-content: flex-end;
  align-self: flex-end;   /* ÙŠØ¬Ø¹Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ ØªÙ„ØªØµÙ‚ Ø¨Ø§Ù„ÙŠÙ…ÙŠÙ† */
}.message.user .bubble { background:#f7e6ff; color:#222; border:1px solid rgba(164,76,255,0.25); }

.bubble {
  padding: 10px 14px;
  border-radius: 12px;
  font-size: 14px;
  line-height: 1.45;

  width: fit-content;     /* Ø§Ù„Ø¨Ø§Ø¨Ù„Ø² Ø¹Ù„Ù‰ Ù‚Ø¯ Ø§Ù„ÙƒÙ„Ø§Ù… */
  max-width: 100%;         /* Ù…Ø§ ØªØªØ¹Ø¯Ø§Ø´ 76% Ù„Ù…Ø§ Ø§Ù„Ø¬Ù…Ù„ ØªÙƒÙˆÙ† Ø·ÙˆÙŠÙ„Ø© */
  white-space: nowrap;     /* Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹: ÙŠÙ…Ù†Ø¹ Ø§Ù„Ù†Øµ Ø§Ù„Ù‚ØµÙŠØ± Ù…Ù† Ø§Ù„Ù†Ø²ÙˆÙ„ Ù„Ø³Ø·Ø± ØªØ§Ù†ÙŠ */
  word-break: break-word;

  min-width: 45px;         /* Ø´ÙƒÙ„ Ø¬Ù…ÙŠÙ„ Ù„Ùˆ ÙƒÙ„Ù…Ø© ØµØºÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹ */
  box-shadow: 0 1px 0 rgba(0,0,0,0.02) inset;
}


 /* Ù…Ø¤Ø´Ø±Ø§Øª typing */
.typing .bubble { display:flex; align-items:center; gap:10px; min-width:100px; }
.dots span { width:6px; height:6px; background:var(--accent1); border-radius:50%; display:inline-block; animation: blink 1.4s infinite; }
.dots span:nth-child(2){ animation-delay:.25s } .dots span:nth-child(3){ animation-delay:.5s }
@keyframes blink { 0%,80%,100%{opacity:.25} 40%{opacity:1} }

/* Ø§Ø²Ø±Ø§Ø± ÙˆÙ†Øµ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
.input-area input {
  flex:1;
  border:none;
  outline:none;
  padding:10px 12px;
  font-size:15px;
  border-radius:10px;
  background:transparent;
  color:var(--fg);
}
.send-btn, .mode-btn {
  width:40px; height:40px; border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  color:#fff; cursor:pointer; user-select:none;
  background: linear-gradient(45deg,var(--accent1),var(--accent2),var(--accent3));
  border:none;
}

/* Ù„Ø§ÙŠØªØ¨ÙˆÙƒØ³ */
#lightbox { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); justify-content:center; align-items:center; z-index:9999; }
#lightbox img { max-width:90%; max-height:90%; border-radius:10px; box-shadow:0 10px 30px rgba(0,0,0,0.6); }
#lightboxClose { position:absolute; top:18px; left:22px; font-size:36px; color:#fff; cursor:pointer; }

/* Ø¯Ø§ÙƒÙ† */
body.dark { --bg:#000; --fg:#eee; --panel-bg:#050407; }
body.dark .input-area { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.02)); }
body.dark .bubble { background: rgba(255,255,255,0.02); color:#e9e9e9; border-color: rgba(255,255,255,0.03); }
body.dark .message.user .bubble { background:#3a1f5a; color:#fff; }
body.dark .message.bot .bubble { background:#001133; color:#fff; }

/* Responsive: Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ Ù†Ø®Ù„ÙŠ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ ÙŠØºØ·ÙŠ Ø§Ù„Ø´Ø§Ø´Ø© ÙƒØ§Ù…Ù„Ø© ÙˆÙ†Ø¬Ø¹Ù„ Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø«Ø§Ø¨Øª Ù„Ù„Ø£Ø³ÙÙ„ */
@media (max-width:900px){
  .container{ padding:10px; height:100vh; }
  .fancy-frame { max-width:100%; padding:4px; border-radius:0; }
  .chat-box { border-radius:0; }
  .messages { padding:16px 14px 120px 14px; } /* Ù…Ø³Ø§Ø­Ø© Ù„Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø«Ø§Ø¨Øª */
  .input-area {
    position: fixed;
    left: calc(var(--border-padding));
    right: calc(var(--border-padding));
    bottom: calc(var(--border-padding));
    z-index:60;
    border-radius: 12px;
    margin: 0 0 0 0;
    box-shadow: 0 10px 25px rgba(0,0,0,0.18);
  }
  body { padding-bottom: env(safe-area-inset-bottom); }
}

/* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù„Ù…Ø³Ø§Øª */
@media (min-width:1400px){ .fancy-frame { max-width: 920px; } }


/* ========================================================
   Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª: Ø¬Ø¹Ù„ Ø§Ù„Ø¨Ø§Ø¨Ù„Ø² ØªØªÙˆØ³Ø¹ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ ÙˆØªÙ†ÙƒØ³Ø± Ù„Ø£Ø³Ø·Ø± Ù…ØªØ¹Ø¯Ø¯Ø©
   (Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ ØªØ£ØªÙŠ ÙÙŠ Ø¢Ø®Ø± Ø§Ù„Ù€ CSS Ù„ØªØ¬Ø§ÙˆØ² Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©)
   ======================================================== */

/* Ù†Ø³Ù…Ø­ Ø¨Ø§Ù„Ø§Ù†ÙƒØ³Ø§Ø± Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ ÙˆØ¥Ø¬Ø¨Ø§Ø± Ø§Ù„Ø¨Ø§Ø¨Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙƒÙŠÙÙŠ */
.bubble{
  /* Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ù†Ø²ÙˆÙ„ Ù„Ø³Ø·Ø± Ø¬Ø¯ÙŠØ¯ */
  white-space: normal !important;

  /* Ø¹Ø±Ø¶ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù„ÙƒÙ†Ù‡ ÙŠÙ‚ÙŠØ¯ Ø¨Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ */
  width: auto !important;

  /* Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹: Ù…Ù†Ø¹ Ø§Ù„Ø¹Ù†ØµØ± Ù…Ù† Ø§Ù„ØªÙ…Ø¯Ø¯ Ø¯Ø§Ø®Ù„ ÙÙ„ÙƒØ³ (ÙŠÙ…Ù†Ø¹ Ø§Ù„Ù…Ø³Ø§Ø­Ø§Øª Ø§Ù„ÙØ§Ø±ØºØ©) */
  flex: 0 0 auto !important;

  /* Ù†Ø¬Ø¹Ù„Ù‡ Ø¹Ù†ØµØ±Ù‹Ø§ ÙŠÙ„Ù Ø§Ù„Ù†Øµ Ø¨Ø¥Ø­ÙƒØ§Ù… Ø­ÙˆÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
  display: inline-block !important;
  vertical-align: middle !important;

  /* Ø£Ù‚ØµÙ‰ Ø¹Ø±Ø¶ Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ â€” ØºÙŠÙ‘Ø±ÙŠ Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ùˆ Ø­Ø¨ÙŠØªÙŠ */
  max-width: 76% !important;

  /* Ù‚ÙˆØ§Ø¹Ø¯ Ù„ÙƒØ³Ø± Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø·ÙˆÙŠÙ„Ø© ÙˆØ§Ù„Ø±ÙˆØ§Ø¨Ø· */
  overflow-wrap: anywhere;
  word-break: break-word;

  /* Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø£Ù† ÙŠÙƒÙˆÙ† ØµØºÙŠØ±Ù‹Ø§ Ø¬Ø¯Ù‹Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø© (Ø£Ù„ØºÙŠÙ†Ø§ Ø§Ù„Ù‚ÙŠÙˆØ¯ Ø§Ù„ØªÙŠ ØªØ³Ø¨Ø¨Øª ÙÙŠ Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„ÙØ§Ø±ØºØ©) */
  min-width: 0 !important;

  /* Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¸Ù‡Ø± */
  box-sizing: border-box;
}

/* ØµÙˆØ± Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¨Ø§Ø¨Ù„ Ù„Ø§ ØªØªØ¬Ø§ÙˆØ² Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø§Ø¨Ù„ */
.bubble img {
  max-width: 100%;
  height: auto;
  display: block;
}

/* Ù†Øµ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¨Ø§Ø¨Ù„ Ù†Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ù€ RTL */
.message .bubble { text-align: start; }

/* Ø¹Ù†Ø¯ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© Ù†Ø®ÙØ¶ Ù†Ø³Ø¨Ø© max-width Ø­ØªÙ‰ Ù„Ø§ ØªØºØ·ÙŠ Ø§Ù„Ø¨Ø§Ø¨Ù„ ÙƒØ§Ù…Ù„ Ø§Ù„Ø´Ø§Ø´Ø© */
@media (max-width:420px){
  .bubble { max-width: 86% !important; }
}
</style>
</head>
<body>
<div class="container">
  <div class="fancy-frame" aria-hidden="false">
    <div class="chat-box" role="main" aria-label="Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©">
      <div class="chat-inner">
        <div class="messages" id="messages" aria-live="polite">
          <div class="message bot">
            <img src="/static/bot.png" alt="bot">
            <div class="bubble">Ù…Ø±Ø­Ø¨Ù‹Ø§ ğŸ‘‹ Ø£Ù†Ø§ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ø°ÙƒÙŠ! ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ</div>
          </div>
        </div>

        <div class="input-area" role="region" aria-label="Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„">
          <input type="text" id="question" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§..." aria-label="Ø­Ù‚Ù„ Ø§Ù„Ø³Ø¤Ø§Ù„">
          <button id="sendBtn" class="send-btn" title="Ø¥Ø±Ø³Ø§Ù„">â†‘</button>
          <button id="modeBtn" class="mode-btn" title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹">ğŸŒ™</button>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="lightbox" role="dialog" aria-modal="true">
  <span id="lightboxClose" aria-label="Ø¥ØºÙ„Ø§Ù‚">&times;</span>
  <img id="lightboxImg" src="" alt="ØµÙˆØ±Ø© Ù…ÙƒØ¨Ø±Ø©">
</div>

<audio id="messageSound" src="images/message.mp3" preload="auto"></audio>

<script>
const messages = document.getElementById("messages");
const input = document.getElementById("question");
const sendBtn = document.getElementById("sendBtn");
const modeBtn = document.getElementById("modeBtn");
const messageSound = document.getElementById("messageSound");

let pendingMessage = null;

function addMessage(sender, text){
  const atBottom = messages.scrollHeight - messages.scrollTop <= messages.clientHeight + 20;
  const msgDiv = document.createElement("div");
  msgDiv.classList.add("message", sender);

  const img = document.createElement("img");
  img.src = sender === "user" ? "/static/user.png" : "/static/bot.png";
  img.alt = sender === "user" ? "user" : "bot";

  const bubble = document.createElement("div");
  bubble.classList.add("bubble");

  if (sender === "bot" && /<img/i.test(text)) {
    bubble.innerHTML = text;
  } else {
    bubble.innerText = text;
  }

  msgDiv.appendChild(img);
  msgDiv.appendChild(bubble);
  messages.appendChild(msgDiv);

  const imgs = bubble.querySelectorAll("img");
  imgs.forEach(el => {
    el.style.cursor = "zoom-in";
    el.addEventListener("click", ()=> openLightbox(el.src));
  });

  if(atBottom) messages.scrollTop = messages.scrollHeight - 10;

  if(sender === "bot"){
    try { messageSound.currentTime = 0; messageSound.play(); } catch(e){}
  }
}

function openLightbox(src){
  const lightbox = document.getElementById("lightbox");
  const lightboxImg = document.getElementById("lightboxImg");
  lightboxImg.src = src;
  lightbox.style.display = "flex";
  document.body.style.overflow = "hidden";
}
document.getElementById("lightboxClose").addEventListener("click", ()=> {
  document.getElementById("lightbox").style.display = "none";
  document.body.style.overflow = "";
});
document.getElementById("lightbox").addEventListener("click", e=>{
  if(e.target.id === "lightbox"){
    document.getElementById("lightbox").style.display = "none";
    document.body.style.overflow = "";
  }
});

function showTyping(){
  const typingDiv = document.createElement("div");
  typingDiv.classList.add("message", "bot", "typing");
  typingDiv.innerHTML = `<img src="/static/bot.png" alt="bot">
    <div class="bubble">
      <span class="dots"><span></span><span></span><span></span></span>
    </div>`;
  messages.appendChild(typingDiv);
  messages.scrollTop = messages.scrollHeight;
  return typingDiv;
}

function sendMessage(){
  const question = input.value.trim();
  if(!question) return;

  addMessage("user", question);
  input.value = "";

  pendingMessage = showTyping();
  sendBtn.innerText = "âœ–";

  fetch("/ask", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({question})
  })
  .then(res => res.json())
  .then(data => {
    if(!pendingMessage) return;
    messages.removeChild(pendingMessage);
    pendingMessage = null;
    sendBtn.innerText = "â†‘";
    addMessage("bot", data.answer || "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ø¯ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù….");
  })
  .catch(() => {
    if(pendingMessage){
      messages.removeChild(pendingMessage);
      pendingMessage = null;
      sendBtn.innerText = "â†‘";
      addMessage("bot", "Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø³Ø¤Ø§Ù„.");
    }
  });
}

sendBtn.addEventListener("click", ()=>{
  if(pendingMessage){
    if(pendingMessage && pendingMessage.parentNode) messages.removeChild(pendingMessage);
    pendingMessage = null;
    sendBtn.innerText = "â†‘";
  } else {
    sendMessage();
  }
});
input.addEventListener("keypress", e => { if(e.key === "Enter") sendMessage(); });

modeBtn.addEventListener("click", ()=>{
  document.body.classList.toggle("dark");
  modeBtn.innerText = document.body.classList.contains("dark") ? "â˜€ï¸" : "ğŸŒ™";
});

window.addEventListener('load', ()=> { try { input.focus(); } catch(e){} });
window.addEventListener('resize', ()=> { messages.scrollTop = messages.scrollHeight; });
</script>
</body>
</html>